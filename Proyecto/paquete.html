<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>AnSolet • Tu Paquete</title>

  <!-- Tipografía & estilos globales -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css" />

  <!-- ====== Estilos mínimos propios de esta vista ====== -->
  <style>
    /* ===== Layout de la página (carrito + opciones) ===== */
    .pkg-layout{
      display:grid;
      grid-template-columns: 360px 1fr; /* Carrito fijo + panel flexible */
      gap:18px;
      padding:20px 0 36px;
    }
    .card-ghost{
      background:rgba(255,255,255,.9);
      border:1px solid #ffffffaa;
      border-radius:20px;
      box-shadow:0 14px 36px #00000012;
      overflow:hidden;
    }

    /* ===== Carrito ===== */
    .cart{ padding:18px 22px; }
    .cart h3{ margin:4px 0 10px; }
    .cart hr{ border:0; border-top:1px solid #e8d9ee; margin:8px 0 12px; }
    .cart .empty{ color:#8a8a8a; }
    .cart ul{ margin:.25rem 0 .6rem 1rem; }
    .total-row{ display:flex; justify-content:space-between; align-items:center; font-weight:800; margin:12px 0 14px; }
    .btn-contact{ display:block; text-align:center; background:#FFC61B; color:#1b1b1b; font-weight:800; border-radius:12px; padding:.85rem 1rem; }

    /* ===== Panel de opciones (acordeón en 3 columnas) ===== */
    .options{ padding:12px 14px 16px; }
    .accordion{
      display:grid;
      grid-template-columns: repeat(3, minmax(280px, 1fr));
      gap:18px;
    }
    .acc{ border:1px solid #f1e6f5; border-radius:18px; background:#fff; overflow:hidden; }
    .acc__head{ display:flex; align-items:center; justify-content:space-between; padding:12px 14px; font-weight:800; cursor:pointer; }
    .acc__body{
      padding:12px 20px 16px 14px; /* + margen para la scrollbar */
      max-height: 66vh;            /* alto razonable */
      overflow: auto;              /* scroll interno si hay muchas opciones */
      box-sizing: border-box;
      scrollbar-gutter: stable both-edges;
    }
    .acc.is-open .acc__body{ display:block; }

    /* ===== Pastillas de opción ===== */
    .pill{
      width:100%;
      background:#ff4b86;
      color:#fff;
      border-radius:12px;
      padding:12px 12px 10px;
      display:grid;
      grid-template-columns: 1fr auto; /* texto | acciones */
      gap:8px 10px;
      align-items:start;
      margin:10px 0;
      box-shadow:0 8px 18px #00000015;
      overflow:hidden;
      word-break:break-word;
      padding-right:12px;
    }
    .pill .line1{ font-weight:800; }
    .pill .sub{ font-size:.85rem; opacity:.95; text-decoration:underline; display:inline-block; margin-top:2px; }
    .pill .badge-dst{ background:#fff; color:#ff4b86; border-radius:7px; padding:2px 6px; font-size:.8rem; font-weight:800; margin-left:6px; }
    .pill .actions{ display:flex; gap:8px; flex-wrap:wrap; justify-content:flex-end; align-items:center; }
    .pill .btn-add,.pill .btn-remove,.pill .btn-ok,.pill .btn-x{
      border:0; border-radius:8px; cursor:pointer; padding:.34rem .64rem; line-height:1;
      font-size:.9rem; font-weight:800; color:#fff; white-space:nowrap; flex:0 0 auto; box-sizing:border-box;
    }
    .pill .btn-add,.pill .btn-ok{ background:#38c793; }   /* verde */
    .pill .btn-remove,.pill .btn-x{ background:#c73c6b; } /* rojo */
    .pill .price{ grid-column:1 / -1; justify-self:end; font-weight:800; }

    /* ===== Responsive ===== */
    @media (max-width: 1100px){ .accordion{ grid-template-columns: repeat(2, minmax(260px,1fr)); } }
    @media (max-width: 780px){
      .pkg-layout{ grid-template-columns: 1fr; }
      .accordion{ grid-template-columns: 1fr; }
    }
    
  </style>
</head>
<body>

  <!-- ===== HEADER (igual a Inicio) =====
       Logo + navegación + botones amarillos de sesión/registro -->
  <header class="site-header">
    <div class="container nav">
      <a class="brand" href="index.html">
        <img src="./imagenes/ansolet.png" alt="AnSolet logo" class="logo">
      </a>

      <nav class="main-nav" aria-label="Navegación principal">
        <a href="index.html">Inicio</a>
        <a href="vuelos.html">Destinos</a>
        <a class="active" href="paquete.html">Tu Paquete</a>
        <a href="#">Ayuda</a>
      </nav>

      <div class="right-nav">
        <span class="minor">Idioma ES | USD</span>
        <a id="openLogin"    class="btn btn-login"    href="#">Iniciar sesión</a>
        <a id="openRegister" class="btn btn-register" href="#">Registrarse</a>
      </div>
    </div>
  </header>

  <!-- ===== CONTENIDO PRINCIPAL =====
       Layout: Carrito (izq) + Secciones de selección (der) -->
  <main class="container pkg-layout">

    <!-- === Carrito ===
         Muestra lo elegido y calcula el total -->
    <aside class="card-ghost cart" aria-label="Resumen del paquete">
      <h3>Tu carrito</h3>
      <hr>

      <div id="cartLines" class="muted">
        <div>Pack Cancún 7 noches:</div>
        <div>Vuelo ida 01/01</div>
        <div>Vuelo vuelta 08/01</div>

        <div style="margin-top:.6rem;"><strong>Hotel</strong></div>
        <div id="cartHotel" class="empty">—</div>

        <div style="margin-top:.6rem;"><strong>Traslados</strong></div>
        <div id="cartTransfer" class="empty">—</div>

        <div style="margin-top:.6rem;"><strong>Experiencias</strong></div>
        <ul id="cartExpList"></ul>
        <div id="cartExpEmpty" class="empty">—</div>
      </div>

      <div class="total-row">
        <span>Total</span>
        <span id="cartTotal">US$ 0</span>
      </div>

      <a href="#" class="btn-contact">Contactar con un asesor</a>
    </aside>

    <!-- === Panel de opciones (acordeón) ===
         Hoteles (único), Traslados (único), Experiencias (múltiples) -->
    <section class="card-ghost options" aria-label="Opciones disponibles">
      <div class="accordion">

        <!-- Hoteles -->
        <article class="acc is-open" id="accHotels">
          <header class="acc__head">
            <span>Hotel</span><span>⌄</span>
          </header>
          <div class="acc__body" id="listHotels"><!-- JS inyecta 4 hoteles --></div>
        </article>

        <!-- Traslados -->
        <article class="acc" id="accTransfers">
          <header class="acc__head">
            <span>Traslados</span><span>⌄</span>
          </header>
          <div class="acc__body" id="listTransfers"><!-- JS inyecta traslados --></div>
        </article>

        <!-- Experiencias -->
        <article class="acc" id="accExp">
          <header class="acc__head">
            <span>Excursiones / Experiencias</span><span>⌄</span>
          </header>
          <div class="acc__body" id="listExp"><!-- JS inyecta experiencias --></div>
        </article>

      </div>
    </section>
  </main>

  <!-- ===== FOOTER ===== -->
  <footer class="site-footer">
    <div class="container footer-inner">
      <div class="social">
        <a href="#" aria-label="Twitter/X"><img src="./imagenes/twitter.png" alt="Twitter" class="social-icon"></a>
        <a href="#" aria-label="Facebook"><img src="./imagenes/facebook.png" alt="Facebook" class="social-icon"></a>
        <a href="#" aria-label="Instagram"><img src="./imagenes/instagram.png" alt="Instagram" class="social-icon"></a>
      </div>
    </div>
  </footer>

  <!-- ===== JS: Datos, Render y Lógica de carrito ===== -->
  <script>
    // === Datos (4 hoteles reales por destino + traslados + experiencias) ===
    const hotels = [
      { id:'h1', name:'Soneva Jani – Overwater Villas', dst:'Maldivas',  stars:5, price:1850 },
      { id:'h2', name:'Zafiro Palace Alcudia',          dst:'Mallorca',  stars:5, price: 420 },
      { id:'h3', name:'Canaves Oia Suites',             dst:'Santorini', stars:5, price: 980 },
      { id:'h4', name:'Marriott Mena House',            dst:'Egipto',    stars:5, price: 360 },
    ];
    const transfers = [
      { id:'t1', name:'Shuttle compartido',                price: 25 },
      { id:'t2', name:'Auto sedán privado',                price: 60 },
      { id:'t3', name:'Minivan (hasta 6 pax)',             price: 90 },
      { id:'t4', name:'Servicio premium (auto ejecutivo)', price:120 },
    ];
    const experiences = [
      { id:'e1', name:'Maldivas · Snorkel safari en arrecifes',  price:140 },
      { id:'e2', name:'Mallorca · Cuevas del Drach + concierto', price: 65 },
      { id:'e3', name:'Santorini · Atardecer en Oia + cata',     price:110 },
      { id:'e4', name:'Egipto · Pirámides + Esfinge con guía',   price: 85 },
    ];

    // === Estado del carrito ===
    const cart = { hotel:null, transfer:null, exp:[] }; // exp = array de experiencias

    // Helpers
    const $  = (s) => document.querySelector(s);
    const fmt = (n) => `US$ ${Number(n||0).toLocaleString('en-US')}`;

    // === Render de una pastilla ===
    function renderPill(item, group){
      const pill = document.createElement('div');
      pill.className = 'pill';
      pill.dataset.group = group;
      pill.dataset.id = item.id;

      // título + subtítulo
      const title = document.createElement('div');
      title.innerHTML = `
        <div class="line1">${item.name}${item.dst ? ` <span class="badge-dst">${item.dst}</span>` : ''}${item.stars ? ` • ${'★'.repeat(item.stars)}` : ''}</div>
        <a href="#" class="sub">Más información</a>
      `;

      // acciones
      const actions = document.createElement('div');
      actions.className = 'actions';

      if(group === 'hotel'){
        const ok = document.createElement('button');
        ok.type='button'; ok.className='btn-ok'; ok.textContent='Seleccionar';
        const rm = document.createElement('button');
        rm.type='button'; rm.className='btn-x'; rm.textContent='Quitar';
        actions.append(ok, rm);
      }else{
        const add = document.createElement('button');
        add.type='button'; add.className='btn-add'; add.textContent='Añadir';
        const rm  = document.createElement('button');
        rm.type='button'; rm.className='btn-remove'; rm.textContent='Quitar';
        actions.append(add, rm);
      }

      // precio
      const price = document.createElement('div');
      price.className = 'price minor';
      price.textContent = fmt(item.price);

      pill.append(title, actions, price);
      return pill;
    }

    // === Montar listas ===
    function mountList(container, data, group){
      container.innerHTML = '';
      data.forEach(it => container.appendChild( renderPill(it, group) ));
    }

    // === Actualizar carrito (UI + total) ===
    function updateCart(){
      // Hotel
      if(cart.hotel){
        $('#cartHotel').textContent = `${cart.hotel.name} (${cart.hotel.dst}) — ${fmt(cart.hotel.price)}`;
        $('#cartHotel').classList.remove('empty');
      } else {
        $('#cartHotel').textContent = '—';
        $('#cartHotel').classList.add('empty');
      }

      // Traslado
      if(cart.transfer){
        $('#cartTransfer').textContent = `${cart.transfer.name} — ${fmt(cart.transfer.price)}`;
        $('#cartTransfer').classList.remove('empty');
      } else {
        $('#cartTransfer').textContent = '—';
        $('#cartTransfer').classList.add('empty');
      }

      // Experiencias (múltiples)
      const ul = $('#cartExpList');
      ul.innerHTML = '';
      cart.exp.forEach(x => {
        const li = document.createElement('li');
        li.textContent = `${x.name} — ${fmt(x.price)}`;
        ul.appendChild(li);
      });
      $('#cartExpEmpty').style.display = cart.exp.length ? 'none' : 'block';

      // Total
      const total =
        (cart.hotel?.price || 0) +
        (cart.transfer?.price || 0) +
        cart.exp.reduce((s,x)=>s + (x.price||0), 0);
      $('#cartTotal').textContent = fmt(total);
    }

    // === Manejo de clicks en pastillas ===
    function handleSelect(e){
      const btn = e.target;
      const pill = btn.closest('.pill'); if(!pill) return;
      const group = pill.dataset.group;
      const id    = pill.dataset.id;

      if(group === 'hotel'){
        if(btn.classList.contains('btn-ok')){
          cart.hotel = hotels.find(h=>h.id===id);
        } else if(btn.classList.contains('btn-x')){
          if(cart.hotel?.id === id) cart.hotel = null;
        }
      }

      if(group === 'transfer'){
        if(btn.classList.contains('btn-add')){
          cart.transfer = transfers.find(t=>t.id===id); // único
        } else if(btn.classList.contains('btn-remove')){
          if(cart.transfer?.id === id) cart.transfer = null;
        }
      }

      if(group === 'exp'){
        if(btn.classList.contains('btn-add')){
          const item = experiences.find(x=>x.id===id);
          if(!cart.exp.some(x=>x.id===id)) cart.exp.push(item); // múltiples
        } else if(btn.classList.contains('btn-remove')){
          cart.exp = cart.exp.filter(x => x.id !== id);
        }
      }

      updateCart();
    }

    // === Acordeón (abrir/cerrar) ===
    document.addEventListener('click', (e)=>{
      const head = e.target.closest('.acc__head');
      if(head) head.parentElement.classList.toggle('is-open');
    });

    // === Montaje inicial ===
    mountList(document.getElementById('listHotels'),    hotels,      'hotel');
    mountList(document.getElementById('listTransfers'), transfers,   'transfer');
    mountList(document.getElementById('listExp'),       experiences, 'exp');

    // Delegación de eventos
    document.getElementById('listHotels').addEventListener('click', handleSelect);
    document.getElementById('listTransfers').addEventListener('click', handleSelect);
    document.getElementById('listExp').addEventListener('click', handleSelect);

    updateCart();
  </script>
</body>
</html>

